<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>h5网络测试</title>
	<style>
		body{background: lightgreen;}
	</style>
	<!-- <script src="docs/js/jquery-3.2.1.min.js" type="text/javascript" charset="utf-8"></script> -->
</head>
<body>
	<script>
		window.onload = function(){
		  	var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
			var type = connection.type;
			function appType(){
				if (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)) {  //判断是否为苹果系统
				    return 1;
				} else if (/(Android)/i.test(navigator.userAgent)) {		//判断是否为安卓系统
				    return 2;
				} else {													//pc或其他系统
					return 3;
				};
			}
			var getappCode = appType();
			function appVersion(type){
				if(type === 2){
					var u = navigator.userAgent;
					num = u.substr(u.indexOf('Android') + 8, 3);
					if (num > 5.0) {
						return 1;
					}
				}
			}
			function updateConnectionStatus(flag) {
				if(flag === 1){
					console.log(type);
			  		if (connection.type === "wifi")
				  	{
				  		alert('当前是wifi网络，请放心观看')
				  	}
					else if (connection.type === "cellular")
				  	{
					  	alert('当前使用流量观看');
				  	}
					else
				  	{
					  	alert('呀吼~没网了哦~');
				  	}
				}
		  	}
		  	var canuseapp = appVersion(getappCode);
		  	// alert(canuseapp);
			connection.addEventListener('typechange', updateConnectionStatus(canuseapp));
		}
	</script>
</body>
</html>